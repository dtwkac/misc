name: v2rayN

on:
  workflow_dispatch:
  push:
    paths:
      - '.github/workflows/v2rayN.yml'

env:
  GREEN: \033[32m
  PURPLE: \033[35m
  RESET: \033[0m

jobs:
  v2rayN-2:
    runs-on: ubuntu-latest
    steps:
      - name: v2rayN 2
        run: |
          set -e
          sudo dpkg --add-architecture i386
          sudo apt update &> /dev/null
          sudo apt install -y wget unzip wine &> /dev/null
          for ((minor=30; minor<=53; minor++)); do
            echo -e "${PURPLE}-------------------------------- v2rayN 2.${minor} --------------------------------${RESET}"
            if ! wget -nv https://github.com/2dust/v2rayN/releases/download/2.${minor}/v2rayN-Core.zip 2> error.log; then
              perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              continue
            fi
            unzip -q v2rayN-Core.zip
            rm v2rayN-Core.zip
            echo -e "${PURPLE}v2rayN-Core:${RESET}"
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            rm -rf v2rayN-Core
          done

  v2rayN-3:
    runs-on: ubuntu-latest
    steps:
      - name: v2rayN 3
        run: |
          set -e
          sudo dpkg --add-architecture i386
          sudo apt update &> /dev/null
          sudo apt install -y wget unzip wine &> /dev/null
          for ((minor=0; minor<=29; minor++)); do
            echo -e "${PURPLE}-------------------------------- v2rayN 3.${minor} --------------------------------${RESET}"
            if [ "${minor}" -eq 15 ]; then
              for ((patch=1; patch<=2; patch++)); do
                echo -e "${PURPLE}-------------------------------- v2rayN 3.${minor}.${patch} --------------------------------${RESET}"
                if ! wget -nv -nv https://github.com/2dust/v2rayN/releases/download/3.${minor}.${patch}/v2rayN-Core.zip 2> error.log; then
                  perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  continue
                fi
                unzip -q v2rayN-Core.zip
                rm v2rayN-Core.zip
                echo -e "${PURPLE}v2rayN-Core:${RESET}"
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                rm -rf v2rayN-Core
              done
              continue
            fi
            if ! wget -nv https://github.com/2dust/v2rayN/releases/download/3.${minor}/v2rayN-Core.zip 2> error.log; then
              perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              continue
            fi
            unzip -q v2rayN-Core.zip
            rm v2rayN-Core.zip
            echo -e "${PURPLE}v2rayN-Core:${RESET}"
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            rm -rf v2rayN-Core
          done

  v2rayN-4:
    runs-on: ubuntu-latest
    steps:
      - name: v2rayN 4
        run: |
          set -e
          sudo dpkg --add-architecture i386
          sudo apt update &> /dev/null
          sudo apt install -y wget unzip wine &> /dev/null
          for ((minor=0; minor<=36; minor++)); do
            echo -e "${PURPLE}-------------------------------- v2rayN 4.${minor} --------------------------------${RESET}"
            if ! wget -nv https://github.com/2dust/v2rayN/releases/download/4.${minor}/v2rayN-Core.zip 2> error.log; then
              perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              continue
            fi
            unzip -q v2rayN-Core.zip
            rm v2rayN-Core.zip
            echo -e "${PURPLE}v2rayN-Core:${RESET}"
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            if [ "${minor}" -ge 9 ]; then
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/xray.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN-Core/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            fi
            rm -rf v2rayN-Core
          done

  v2rayN-5:
    runs-on: ubuntu-latest
    steps:
      - name: v2rayN 5
        run: |
          set -e
          sudo dpkg --add-architecture i386
          sudo apt update &> /dev/null
          sudo apt install -y wget unzip wine &> /dev/null
          for ((minor=0; minor<=39; minor++)); do
            echo -e "${PURPLE}-------------------------------- v2rayN 5.${minor} --------------------------------${RESET}"
            if ! wget -nv https://github.com/2dust/v2rayN/releases/download/5.${minor}/v2rayN-Core.zip 2> error.log; then
              perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              continue
            fi
            unzip -q v2rayN-Core.zip
            rm v2rayN-Core.zip
            echo -e "${PURPLE}v2rayN-Core:${RESET}"
            if [ "${minor}" -le 34 ]; then
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe -version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            else
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN-Core/v2ray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            fi
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-Core/xray.exe version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN-Core/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            rm -rf v2rayN-Core
          done

  v2rayN-6:
    runs-on: ubuntu-latest
    steps:
      - name: v2rayN 6
        run: |
          set -e
          sudo apt update &> /dev/null
          sudo apt install -y wget unzip 7zip wine &> /dev/null
          for ((minor=0; minor<=60; minor++)); do
            echo -e "${PURPLE}-------------------------------- v2rayN 6.${minor} --------------------------------${RESET}"
            if [ "${minor}" -lt 2 ]; then
              suffix=""
            elif [ "${minor}" -lt 6 ]; then
              suffix="-Core"
            else
              suffix="-With-Core"
            fi
            if [ "${minor}" -ge 44 ]; then
              mihomo_exe="mihomo-windows-amd64-compatible.exe"
            else
              mihomo_exe="mihomo.exe"
            fi
            if ! wget -nv https://github.com/2dust/v2rayN/releases/download/6.${minor}/v2rayN${suffix}.zip 2> error.log; then
              perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              continue
            fi
            unzip -q v2rayN${suffix}.zip
            rm v2rayN${suffix}.zip
            echo -e "${PURPLE}v2rayN${suffix}:${RESET}"
            if [ "${minor}" -ge 32 ]; then
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/mihomo/mihomo.exe -v:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            fi
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/sing_box/sing-box.exe version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/v2fly_v5/v2ray.exe version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/v2fly_v5/v2ray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/Xray/xray.exe version:${RESET}"
            wine ${GITHUB_WORKSPACE}/v2rayN${suffix}/bin/Xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
            rm -rf v2rayN${suffix}
            if [ "${minor}" -eq 7 ] || [ "${minor}" -eq 8 ]; then
              echo -e "${PURPLE}v2rayN-With-Core-SelfContained:${RESET}"
              if ! wget -nv https://github.com/2dust/v2rayN/releases/download/6.${minor}/zz-v2rayN-With-Core-SelfContained.7z 2> error.log; then
                perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                continue
              fi
              7z x zz-v2rayN-With-Core-SelfContained.7z > /dev/null
              rm zz-v2rayN-With-Core-SelfContained.7z
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-With-Core-SelfContained/bin/sing_box/sing-box.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN-With-Core-SelfContained/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-With-Core-SelfContained/bin/v2fly_v5/v2ray.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN-With-Core-SelfContained/bin/v2fly_v5/v2ray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-With-Core-SelfContained/bin/Xray/xray.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/v2rayN-With-Core-SelfContained/bin/Xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              rm -rf zz-v2rayN-With-Core-SelfContained
            fi
            if [ "${minor}" -ge 9 ]; then
              if ! wget -nv https://github.com/2dust/v2rayN/releases/download/6.${minor}/zz_v2rayN-With-Core-SelfContained.7z 2> error.log; then
                perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                continue
              fi
              7z x zz_v2rayN-With-Core-SelfContained.7z > /dev/null
              rm zz_v2rayN-With-Core-SelfContained.7z
              echo -e "${PURPLE}zz_v2rayN-With-Core-SelfContained:${RESET}"
              if [ "${minor}" -ge 32 ]; then
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/mihomo/mihomo.exe -v:${RESET}"
                wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              fi
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/sing_box/sing-box.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/v2fly_v5/v2ray.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/v2fly_v5/v2ray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/Xray/xray.exe version:${RESET}"
              wine ${GITHUB_WORKSPACE}/zz_v2rayN-With-Core-SelfContained/bin/Xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              rm -rf zz_v2rayN-With-Core-SelfContained
            fi
          done

  v2rayN-7:
    runs-on: ubuntu-latest
    steps:
      - name: v2rayN 7
        run: |
          set -e
          sudo apt-get update &> /dev/null
          sudo apt-get install -y wget unzip wine &> /dev/null
          declare -a patches=([0]=9 [1]=3 [2]=3 [3]=2 [4]=2 [5]=6 [6]=2 [7]=1 [8]=3 [9]=3
                             [10]=5 [11]=3 [12]=7 [13]=8 [14]=12 [15]=7 [16]=9 [17]=3 [18]=0 [19]=0
          )
          for minor in "${!patches[@]}"; do
            for ((patch=0; patch<=patches[minor]; patch++)); do
              echo -e "${PURPLE}-------------------------------- v2rayN 7.${minor}.${patch} --------------------------------${RESET}"
              if [ "$minor" -ge 14 ]; then
                mihomo_exe="mihomo.exe"
              else
                mihomo_exe="mihomo-windows-amd64-compatible.exe"
              fi
              if [ "$minor" -lt 7 ]; then
                if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-windows-64-With-Core.zip 2> error.log; then
                  perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  continue
                fi
                unzip -q v2rayN-windows-64-With-Core.zip
                rm v2rayN-windows-64-With-Core.zip
                echo -e "${PURPLE}v2rayN-windows-64-With-Core:${RESET}"
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-With-Core/bin/mihomo/${mihomo_exe} -v:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-With-Core/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-With-Core/bin/sing_box/sing-box.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-With-Core/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-With-Core/bin/xray/xray.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-With-Core/bin/xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                rm -rf v2rayN-windows-64-With-Core
                if [ "$minor" -lt 5 ]; then
                  if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-windows-64-SelfContained-With-Core.7z 2> error.log; then
                    perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                    continue
                  fi
                  7z x v2rayN-windows-64-SelfContained-With-Core.7z > /dev/null
                  rm v2rayN-windows-64-SelfContained-With-Core.7z
                else
                  if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-windows-64-SelfContained-With-Core.zip 2> error.log; then
                    perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                    continue
                  fi
                  unzip -q v2rayN-windows-64-SelfContained-With-Core.zip
                  rm v2rayN-windows-64-SelfContained-With-Core.zip
                fi
                echo -e "${PURPLE}v2rayN-windows-64-SelfContained-With-Core:${RESET}"
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained-With-Core/bin/mihomo/${mihomo_exe} -v:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained-With-Core/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained-With-Core/bin/sing_box/sing-box.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained-With-Core/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained-With-Core/bin/xray/xray.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained-With-Core/bin/xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                rm -rf v2rayN-windows-64-SelfContained-With-Core
              else
                if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-windows-64.zip 2> error.log; then
                  perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  continue
                fi
                unzip -q v2rayN-windows-64.zip
                rm v2rayN-windows-64.zip
                echo -e "${PURPLE}v2rayN-windows-64:${RESET}"
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64/bin/mihomo/${mihomo_exe} -v:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64/bin/sing_box/sing-box.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64/bin/xray/xray.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64/bin/xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                rm -rf v2rayN-windows-64
                if [ "$minor" -lt 18 ]; then
                  if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-windows-64-SelfContained.zip 2> error.log; then
                    perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                    continue
                  fi
                  unzip -q v2rayN-windows-64-SelfContained.zip
                  rm v2rayN-windows-64-SelfContained.zip
                  echo -e "${PURPLE}v2rayN-windows-64-SelfContained:${RESET}"
                  echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained/bin/mihomo/${mihomo_exe} -v:${RESET}"
                  wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained/bin/sing_box/sing-box.exe version:${RESET}"
                  wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained/bin/xray/xray.exe version:${RESET}"
                  wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-SelfContained/bin/xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  rm -rf v2rayN-windows-64-SelfContained
                fi
              fi
              if [ "$minor" -ge 9 ]; then
                if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-windows-64-desktop.zip 2> error.log; then
                  perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                  continue
                fi
                unzip -q v2rayN-windows-64-desktop.zip
                rm v2rayN-windows-64-desktop.zip
                mv ${GITHUB_WORKSPACE}/v2rayN-windows-64 ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop
                echo -e "${PURPLE}v2rayN-windows-64-desktop:${RESET}"
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop/bin/mihomo/${mihomo_exe} -v:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop/bin/mihomo/${mihomo_exe} -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop/bin/sing_box/sing-box.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop/bin/sing_box/sing-box.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                echo -e "${GREEN}wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop/bin/xray/xray.exe version:${RESET}"
                wine ${GITHUB_WORKSPACE}/v2rayN-windows-64-desktop/bin/xray/xray.exe version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                rm -rf v2rayN-windows-64-desktop
              fi
              if ! wget -nv https://github.com/2dust/v2rayN/releases/download/7.${minor}.${patch}/v2rayN-linux-64.zip 2> error.log; then
                perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
                continue
              fi
              unzip -q v2rayN-linux-64.zip
              rm v2rayN-linux-64.zip
              echo -e "${PURPLE}v2rayN-linux-64:${RESET}"
              chmod +x ${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/mihomo/mihomo
              echo -e "${GREEN}${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/mihomo/mihomo -v:${RESET}"
              ${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/mihomo/mihomo -v 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              chmod +x ${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/sing_box/sing-box
              echo -e "${GREEN}${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/sing_box/sing-box version:${RESET}"
              ${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/sing_box/sing-box version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              chmod +x ${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/xray/xray
              echo -e "${GREEN}${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/xray/xray version:${RESET}"
              ${GITHUB_WORKSPACE}/v2rayN-linux-64/bin/xray/xray version 2> error.log || perl -pe 'print "\e[31m"; s/$/\e[0m/' error.log
              rm -rf v2rayN-linux-64
            done
          done
